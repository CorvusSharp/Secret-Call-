
# SecureCall WebRTC

SecureCall ‚Äî —ç—Ç–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∞–Ω–æ–Ω–∏–º–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –¥–ª—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∑–≤–æ–Ω–∫–æ–≤ –Ω–∞ –±–∞–∑–µ **WebRTC** —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º (signal-only).  
–ó–∞–¥–∞—á–∞ –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –¥–∞–∂–µ –±–µ–∑ —Ç—è–∂–µ–ª–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –∑–≤–æ–Ω–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç—É–ø–∞—é—Ç –∫—Ä—É–ø–Ω—ã–º —Ä–µ—à–µ–Ω–∏—è–º, –∞ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –¥–∞–∂–µ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥—è—Ç.

---

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **–ë—ç–∫–µ–Ω–¥**: `aiohttp` WebSocket-—Å–µ—Ä–≤–µ—Ä (Python 3.11+).  
  –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–∏–≥–Ω–∞–ª–∏–Ω–≥–∞ (–æ–±–º–µ–Ω–∞ SDP/ICE).  
  - –ê–Ω—Ç–∏—Ñ–ª—É–¥, –∞–Ω—Ç–∏-replay, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ Origin, —Ç–æ–∫–µ–Ω –∫–æ–º–Ω–∞—Ç—ã.  
  - UDP discovery –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ö–æ—Å—Ç–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏.  
  - –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ (CSP, HSTS, Permissions-Policy).

- **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: `Vanilla JS` + WebRTC API.  
  - –ö–∞–∂–¥—ã–π –ø–∏—Ä —Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ (mesh –¥–æ 10 —á–µ–ª–æ–≤–µ–∫).  
  - `RTCPeerConnection` —Å relay-only TURN (–≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ) –∏–ª–∏ STUN (dev).  
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–Ω–µ–≥–æ—Ü–∏–∞—Ü–∏—è, watchdog –¥–ª—è –∞—É–¥–∏–æ.  
  - –î–µ—Ç–µ–∫—Ü–∏—è —Ä–µ—á–∏, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ fingerprint'–æ–≤.  

- **E2E –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è**:  
  - ECDH (P-256) –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±—â–µ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞.  
  - HKDF ‚Üí AES-256-GCM (—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π) –∏ HMAC-SHA256 (–ø–æ–¥–ø–∏—Å–∏).  
  - Fingerprint = –ø–µ—Ä–≤—ã–µ 8 –±–∞–π—Ç SHA-256(pub).  
  - –í—Å–µ —á–∞—Ç—ã ‚Äî —Å–∫–≤–æ–∑–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ.  
  - –ì–æ–ª–æ—Å ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π SRTP –æ—Ç WebRTC (AES-GCM).

---

## üîí –ü–æ—á–µ–º—É —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ

1. **–ù–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞**: —Å–µ—Ä–≤–µ—Ä —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã, –Ω–µ –≤–∏–¥–∏—Ç SDP/ICE/–∫–ª—é—á–µ–π.  
2. **–ê–Ω—Ç–∏-replay**: —Å–µ—Ä–≤–µ—Ä –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã ts, –∫–ª–∏–µ–Ω—Ç—ã ‚Äî —Å—Ç—Ä–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â—É—é –º–æ–Ω–æ—Ç–æ–Ω–∏—é.  
3. **Anti-flood**: –ª–∏–º–∏—Ç 20 —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫ –Ω–∞ –ø–∏—Ä–∞.  
4. **Origin whitelist + —Ç–æ–∫–µ–Ω**: –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ Origin –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –Ω–µ–ª—å–∑—è.  
5. **Relay-only TURN**: –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ IP –ø–∏—Ä–æ–≤ —Å–∫—Ä—ã—Ç, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–¥—ë—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ TURN.  
6. **E2E-—á–∞—Ç**: AES-GCM –ø–æ–≤–µ—Ä—Ö WebRTC DataChannel.  
7. **Fingerprints**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–≤–µ—Ä–∏—Ç—å SHA-256(pub) –≥–æ–ª–æ—Å–∞ –≤—Ä—É—á–Ω—É—é.  
8. **–ë—Ä–∞—É–∑–µ—Ä-only**: –∫–ª–∏–µ–Ω—Ç—ã ‚Äî —Ç–æ–ª—å–∫–æ –±—Ä–∞—É–∑–µ—Ä—ã (–Ω–µ—Ç ¬´–±–æ—Ç–æ–≤¬ª –∏ ¬´CLI –∫–ª–∏–µ–Ω—Ç–æ–≤¬ª).

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Signal / Session

| –§–∞–∫—Ç–æ—Ä                 | SecureCall            | Signal                | Session                  |
|------------------------|----------------------|----------------------|--------------------------|
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞            | –°–µ—Ä–≤–µ—Ä-—Å–∏–≥–Ω–∞–ª–∏–Ω–≥, –∑–≤–æ–Ω–∫–∏ P2P | –°–µ—Ä–≤–µ—Ä—ã Signal (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑.) | –î–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–∑–ª—ã  |
| –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö        | –ù–µ—Ç                  | –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —É —Å–µ—Ä–≤–µ—Ä–∞ | –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã  |
| –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª—é—á–µ–π     | Fingerprint (–≤—Ä—É—á–Ω—É—é)| Safety Numbers (QR)   | Onion routing + PKI      |
| –ê–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å            | –í—ã—Å–æ–∫–∞—è –ø—Ä–∏ TURN-only| –°—Ä–µ–¥–Ω—è—è (IP –∏–∑–≤–µ—Å—Ç–µ–Ω)| –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ|
| –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å       | –¥–æ ~10 –ø–∏—Ä–æ–≤ (mesh) | —Ç—ã—Å—è—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ—Ç–∏          |
| –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Ü–µ–Ω–∑—É—Ä–µ | —Å—Ä–µ–¥–Ω—è—è              | –≤—ã—Å–æ–∫–∞—è               | –≤—ã—Å–æ–∫–∞—è                  |

**–ì–¥–µ SecureCall —Å–∏–ª—å–Ω–µ–µ:**  
- –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, –Ω–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –æ –∑–≤–æ–Ω–∫–∞—Ö.  
- TURN-only —Å–∫—Ä—ã–≤–∞–µ—Ç IP —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–≤ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞.  
- –ú–∏–Ω–∏–º—É–º –ª–æ–≥–æ–≤: –±–µ–∑ SDP, ICE, —Ç–æ–∫–µ–Ω–æ–≤.  

**–ì–¥–µ —É—Å—Ç—É–ø–∞–µ—Ç:**  
- –ù–µ—Ç onion-—Ä–æ—É—Ç–∏–Ω–≥–∞ (–∫–∞–∫ —É Session).  
- Mesh-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –ø–æ —á–∏—Å–ª—É —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (~10).  
- –ù–µ—Ç —Ñ–µ–¥–µ—Ä–∞—Ü–∏–∏ –∏ discovery –∫–∞–∫ —É Signal/Matrix.  

---

## üåç –ö–æ–≥–¥–∞ —ç—Ç–æ —Å–∞–º—ã–π –∞–Ω–æ–Ω–∏–º–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä

- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ **—Å–≤–æ–µ–≥–æ TURN-—Å–µ—Ä–≤–µ—Ä–∞** –∑–∞ VPN/Tor.  
- –ü—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ STUN –∏ —Ä–∞–±–æ—Ç–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ relay.  
- –ü—Ä–∏ —Ä—É—á–Ω–æ–π —Å–≤–µ—Ä–∫–µ fingerprint'–æ–≤ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–≤.  
- –ü—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–∏ —á–∏—Å–ª–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤.  

–í —Ç–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö:  
- –°–µ—Ä–≤–µ—Ä –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –Ω–∏—á–µ–≥–æ, –∫—Ä–æ–º–µ —Ñ–∞–∫—Ç–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.  
- IP —Å–∫—Ä—ã—Ç, –¥–∞–∂–µ –æ—Ç —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–≤.  
- –î–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è –Ω–∞ –¥–≤—É—Ö —É—Ä–æ–≤–Ω—è—Ö: SRTP + E2E.  
- –ù–∏–∫–∞–∫–∏—Ö –ª–æ–≥–æ–≤, –Ω–∏–∫–∞–∫–æ–π —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏.  

---

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä (2 –ø–∏—Ä–∞)
python ./main.py

# –í –±—Ä–∞—É–∑–µ—Ä–µ: –æ—Ç–∫—Ä—ã—Ç—å http://localhost:8790/
```

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å TURN (–Ω–∞–ø—Ä–∏–º–µ—Ä, coturn).  
- –í–∫–ª—é—á–∏—Ç—å HTTPS/WSS.  
- –í—ã—Å—Ç–∞–≤–∏—Ç—å `PROD=1`, `ROOM_TOKEN=...`, `ALLOWED_ORIGINS=...`.  

---

## ‚öñÔ∏è –ò—Ç–æ–≥

**SecureCall** ‚Äî –ª—ë–≥–∫–∏–π –∏ –∞–Ω–æ–Ω–∏–º–Ω—ã–π P2P-–º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—á–µ—Ç–∞–µ—Ç:  
- –ø—Ä–æ—Å—Ç–æ—Ç—É WebRTC,  
- –∑–∞—â–∏—Ç—É —É—Ä–æ–≤–Ω—è Signal,  
- –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å —É—Ä–æ–≤–Ω—è Session (–ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏).  

–ì–ª–∞–≤–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ ‚Äî –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å. –ù–æ –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Å–æ–∑–≤–æ–Ω–æ–≤ –Ω–∞ 2‚Äì10 —á–µ–ª–æ–≤–µ–∫ ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.
